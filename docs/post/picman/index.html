<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>picman: photo sorting tool | sigmonsays</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="github https://github.com/sigmonsays/picman
I wrote a basic tool to replace my krufty bash scripts that imports my photos from various locations into their final resting place.
The tool operates in steps where each step is kind of idempotent. The set of all steps is called a workflow and operates on a single file. see code.
Each step operates on the same workflow object, which primarily has a state object
State Object code">
    <meta name="generator" content="Hugo 0.118.2">
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    
      

    

    
    
    <meta property="og:title" content="picman: photo sorting tool" />
<meta property="og:description" content="github https://github.com/sigmonsays/picman
I wrote a basic tool to replace my krufty bash scripts that imports my photos from various locations into their final resting place.
The tool operates in steps where each step is kind of idempotent. The set of all steps is called a workflow and operates on a single file. see code.
Each step operates on the same workflow object, which primarily has a state object
State Object code" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://sigmonsays.github.io/post/picman/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-12-31T10:58:55-08:00" />
<meta property="article:modified_time" content="2023-12-31T10:58:55-08:00" />
<meta itemprop="name" content="picman: photo sorting tool">
<meta itemprop="description" content="github https://github.com/sigmonsays/picman
I wrote a basic tool to replace my krufty bash scripts that imports my photos from various locations into their final resting place.
The tool operates in steps where each step is kind of idempotent. The set of all steps is called a workflow and operates on a single file. see code.
Each step operates on the same workflow object, which primarily has a state object
State Object code"><meta itemprop="datePublished" content="2023-12-31T10:58:55-08:00" />
<meta itemprop="dateModified" content="2023-12-31T10:58:55-08:00" />
<meta itemprop="wordCount" content="273">
<meta itemprop="keywords" content="projects,photos," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="picman: photo sorting tool"/>
<meta name="twitter:description" content="github https://github.com/sigmonsays/picman
I wrote a basic tool to replace my krufty bash scripts that imports my photos from various locations into their final resting place.
The tool operates in steps where each step is kind of idempotent. The set of all steps is called a workflow and operates on a single file. see code.
Each step operates on the same workflow object, which primarily has a state object
State Object code"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/" title="home  page">
              home 
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/projects/" title="projects  page">
              projects 
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/tags/misc/" title="misc  page">
              misc 
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/archives/" title="archives  page">
              archives 
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="about  page">
              about 
            </a>
          </li>
          
        </ul>
      
      















    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      <h1 class="f1 athelas mt3 mb1">picman: photo sorting tool</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2023-12-31T10:58:55-08:00">December 31, 2023</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>github <a href="https://github.com/sigmonsays/picman">https://github.com/sigmonsays/picman</a></p>
<p>I wrote a basic tool to replace my krufty bash scripts that imports my photos from various locations into
their final resting place.</p>
<p>The tool operates in steps where each step is kind of idempotent. The set of all steps is called
a workflow and operates on a single file. see <a href="https://github.com/sigmonsays/picman/blob/dev/autosort/workflow.go#L18">code</a>.</p>
<p>Each step operates on the same workflow object, which primarily has a state object</p>
<p>State Object <a href="https://github.com/sigmonsays/picman/blob/dev/core/statefile.go#L26">code</a></p>
<ul>
<li>holds exif data</li>
<li>holds file stat information</li>
<li>holds date metadata that is obtained via exif or other logic</li>
<li>holds checksum and logs of processing the file</li>
</ul>
<p>Steps in order</p>
<ul>
<li>StartWorkflow - logs a start workflow</li>
<li>CheckSupportedType - returns core.StopProcessing if file type is not supported</li>
<li>PopulateExif - obtains exif data via json</li>
<li>CheckExif - abandons file processing if it&rsquo;s a text file or if we have no exif data</li>
<li>ObtainDateTaken - gets data taken by looking at various exif data fields</li>
<li>ChecksumFile - obtain checksum of file</li>
<li>GenerateFinalName - generate a destination file name based on date taken</li>
<li>CopyFile - copy file to final destination</li>
</ul>
<p>This process makes it very easy to build tools up around various photo imports.</p>
<p>Finally this tool writes a json summary of how many files were copied if you need to re-index
external photo stores. This allows better integration with tooling like photoprism/photostructure.</p>
<h1 id="additional-notes">Additional notes</h1>
<p>This tool with syncthing and photoprism has solved my photo needs without relying on a cloud storage
service or photo hosting provider. I own my own photos and have originals backed up at all times.</p>
<p>photo backups are taken daily via restic and stored encrypted in a cloud storage provider (currently backblaze)</p>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/projects" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">projects</a>
   </li>
  
   <li class="list">
     <a href="/tags/photos" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">photos</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/post/dotbot/">dotbot</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/screenshot/">screenshot</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/paste/">paste, an hour long project</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/post/git-watch/">git-watch</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://sigmonsays.github.io/" >
    &copy;  sigmonsays 2024 
  </a>
    <div>














</div>
  </div>
</footer>

  </body>
</html>
